// Code generated by hertz generator.

package main

import (
	"github.com/cloudwego/hertz/pkg/app/server"
	"tiktok/config"
	"tiktok/dal/cache"
	"tiktok/dal/db"
	"tiktok/dal/es"
	"tiktok/dal/rabbitmq"
	"tiktok/pkg/util"
	"tiktok/service/ws"
)

func init() {
	util.InitLog()
	config.InitConfig()
	dao.InitMySQL()
	cache.LinkRedis()
	rabbitmq.LinkRabbitmq()
	es.LinkEs()
	util.OssInit()
}
func main() {
	go ws.Manager.Start()
	h := server.Default(server.WithHostPorts("0.0.0.0:10001"),
		server.WithMaxRequestBodySize(419430400))
	register(h)
	h.Spin()
}
